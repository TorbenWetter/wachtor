# agent-gate configuration
# Copy to config.yaml and fill in values

gateway:
  host: "0.0.0.0"
  port: 8443
  tls:
    cert: "/path/to/cert.pem"    # required unless --insecure
    key: "/path/to/key.pem"

agent:
  token: "${AGENT_TOKEN}"

messenger:
  type: "telegram"
  telegram:
    token: "${GUARDIAN_BOT_TOKEN}"
    chat_id: 123456789              # integer — Telegram chat ID (negative for groups)
    allowed_users: [123456789]      # required — Telegram user IDs who can approve

services:
  homeassistant:
    url: "http://homeassistant.local:8123"
    auth:
      type: bearer
      token: "${HA_TOKEN}"
    health:
      method: GET
      path: "/api/"
      expect_status: 200
    tools: "tools/homeassistant.yaml"
    errors:
      - status: 401
        message: "Authentication failed (HA token expired?)"
      - status: 404
        message: "Entity not found: {body}"

  # Example: adding another HTTP API service
  # my_api:
  #   url: "https://api.example.com"
  #   auth:
  #     type: header
  #     header_name: "X-API-Key"
  #     token: "${MY_API_KEY}"
  #   tools: "tools/my_api.yaml"

  # Example: Python plugin service (non-HTTP)
  # custom:
  #   url: "mqtt://broker.local"
  #   auth:
  #     type: bearer
  #     token: "${MQTT_TOKEN}"
  #   handler: python
  #   handler_class: "my_plugin:MQTTService"
  #   tools: "tools/custom.yaml"

storage:
  type: "sqlite"
  path: "./data/agent-gate.db"

# approval_timeout: 900  # 15 minutes (default)
# rate_limit:
#   max_pending_approvals: 10
#   max_requests_per_minute: 60
